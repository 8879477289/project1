var Modules=new function(){this.FORM=1;this.REPORT=2;this.PAGE=3;this.ADMINPANEL=4;this.APPROVAL=5;this.NLP=6};function Requires(A){this.get=function(){switch(A){case Modules.FORM:var C=["intltelinput","tpForm","form","moment","datepicker"];return C;case Modules.REPORT:var B=["moment","datepicker","datatables","Handsontable","fullcalendar"];B.push("tpReport","report");return B;case Modules.PAGE:return["d3","tpPage","page"];case Modules.ADMINPANEL:return["admin","fontawesome","nucleo"];case Modules.APPROVAL:return["approval"];case Modules.NLP:return["d3","nlpautosuggest","nlp"]}};this.getPromise=function(B){switch(A){case Modules.FORM:return function(D,C,E,G,F){window.moment=G;B()};case Modules.REPORT:return function(H,E,I,D,G,F,C){window.Handsontable=D;window.moment=H;B()};case Modules.PAGE:return function(D,C,E){window.d3=D;require(["zcchart"],function(){B()})};case Modules.ADMINPANEL:return function(){B()};case Modules.APPROVAL:return function(){B()};case Modules.NLP:return function(E,C,D){window.d3=E;window.AutoSuggest=C;require(["zcchart"],function(){require(["zcchartexport"],function(){B()})})};default:return function(){B()}}}}function ZCBoot(B){var A=this;A.isAppMode=true;A.isMobile=B.isMobile;A.config=B;A.setup=B.setup;A.module;this.preprocess=function(){require.config({paths:{admin:B.jsApacheServer+"/creator/"+B.label+"/app/js/adminpanel",walkthrough:B.jsApacheServer+"/creator/"+B.label+"/app/js/walkthrough",form:B.jsApacheServer+"/creator/"+B.label+"/app/js/form",report:B.jsApacheServer+"/creator/"+B.label+"/app/js/report",page:B.jsApacheServer+"/creator/"+B.label+"/app/js/page",d3:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/d3",zcchart:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/zcchart",zcchartexport:B.jsApacheServer+"/creator/"+B.label+"/app/js"+B.jsVersion+"/zcchartexport",approval:B.jsApacheServer+"/creator/"+B.label+"/app/js/approval",Handsontable:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/jquery-handsontable",intltelinput:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/jquery-intlTelInput",mapbox:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/vmaps-min",wavesurfer:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/wavesurfer.min",security:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/security",nucleo:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/nucleo",fontawesome:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/font-awesome",moment:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/moment",jquery:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/jquery",datepicker:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/dtpicker",datatables:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/datatable",tpForm:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/tp-liveform",tpReport:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/tp-livereport",tpPage:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/tp-livepage",fullcalendar:B.jsApacheServer+"/creator/"+B.staticLabel+"/js/fullcalendar",nlp:B.jsApacheServer+"/creator/"+B.label+"/app/js"+B.jsVersion+"/nlp",nlpautosuggest:B.jsApacheServer+"/creator/"+B.label+"/app/js/AutoSuggest",zohomaps:B.jsApacheServer+"/creator/"+B.label+"/app/js"+B.jsVersion+"/zohomaps",mapboxgl:B.jsApacheServer+"/creator/zmaps/js/mapbox-gl",mapboxdraw:B.jsApacheServer+"/creator/zmaps/js/mapbox-gl-draw"},waitSeconds:120})};B.useCompression&&this.preprocess();this.mobileBoot=function(){resetViewport();A.isMobile&&initMobile()};this.boot=function(){A.mobileBoot();if(!B.useCompression){loadFile("/zohocreator/static_js/jquery-handsontable.js",true).then(function(){A.init()});return }if(A.module==Modules.PAGE){A.init()}else{require(["security"],function(){A.init()})}};this.init=function(){A.isAppMode&&A.loadPrefs();A.loadComponent();A.postprocess()};this.loadPrefs=function(){$(".user_image").attr("src",A.config.contactSRC);if(B.walkThrough&&isNull(getCookie("zc-walkthroughstep"))){setCookie("zc-walkthroughstep",17,30,"","/")}if($.isEmptyObject(B.micsConfig)!=true&&!B.isPrviewAction){var C=new $mics(B.micsConfig.sharedBy,B.micsConfig.micsServiceId,B.micsConfig.tipengineURL);C.init();!B.micsConfig.isFlatDashboardEnabled&&oldDashboardTracking(ZCGlobal.scopeName)}if($.isEmptyObject(B.managerConfig)!=true&&isNull(getCookie("zc-walkthroughstep"))&&B.managerConfig.hasOwnProperty("response")&&B.managerConfig.response.length>0){B.managerConfig.isAjax=false;try{Manager.create(B.managerConfig)}catch(D){Console.log(D)}}};this.loadComponent=function(){if(B.appMeta!=undefined){if(B.isPrviewAction){Controller.ApplicationController.create({type:ApplicationControllerType.PREVIEWAPPLICATION,model:B.appMeta})}else{Controller.ApplicationController.create({model:B.appMeta})}}};this.postprocess=function(){A.isAppMode&&A.initReachUs();A.initBanner();if(ZCGlobal.isNewExport){A.registerWMS()}window.liveErrorHandler=new LiveErrorHandler({isMobile:A.isMobile,isReadOnly:typeof (ZCGlobal)!="undefined"?ZCGlobal.isReadOnly:false})};this.initZSWidget=function(){if(("us".toLowerCase()===A.setup||"local".toLowerCase()===A.setup)){loadFiles([ZCPath.storeJSUrl,ZCPath.storeCssUrl])}};this.initBanner=function(){if(B.isBrowserDeprecated&&!B.isPrviewAction){$(".zc-dem-container").deprecateBanner(B.isShowAdminBanner,ZCGlobal.isMobileLayout)}else{if(!B.isPrviewAction&&B.showSecurityBannerInLive){var C={scopeId:B.scopeId,appId:B.appId,isAppOwner:B.isAppOwner,newLive:true,isDevAccount:B.isDevAccount,isCreator5:B.isC5};$(".zc-dem-container").betaSecurityBanner(C)}}if(B.isskydeskBannerEnabled&&!B.isPrviewAction){$(".zc-dem-container").skydeskBanner()}};this.registerWMS=function(){loadFile(ZCPath.wmsliteJs,true).then(function(){WmsLite.setWmsContext("_wms");WmsLite.setNoDomainChange();WmsLite.useSameDomain();WmsLite.useLongPolling();WmsLite.registerZuid("CE",ZCGlobal.loginZuid,ZCGlobal.loginUserId,false)})};this.initReachUs=function(){if(B.isC5){loadFiles([ZCPath.appCss.reachusCss,ZCPath.staticCss.supportCss,ZCPath.staticCss.zbuttonCss]);loadFiles([ZCPath.appJs.reachusJs,ZCPath.staticJs.supportJs]).then(function(){reachus=REACHUS.getInstance(REACHUS.LIVE)})}}}function ZCFormBoot(B){ZCBoot.call(this,B);var A=this;this.module=Modules.FORM;this.isAppMode=false;this.loadComponent=function(){var C=function(){jsLoaded=true;var E={};E.model=A.config.compMeta;E.html=$("#zc-component").html();E.container=$("#zc-component");E.data=A.config.data;E.dynamicMeta=A.config.dynMeta;if(A.config.isPrviewAction){E.type=FormControllerType.PREVIEWFORM}window.FORMCONTROLLER=Controller.FormController.create(E)};if(A.config.useCompression){var D=new Requires(Modules.FORM);require(D.get(),D.getPromise(function(){C()}))}else{C()}}}ZCFormBoot.prototype=Object.create(ZCBoot.prototype);ZCFormBoot.prototype.constructor=ZCFormBoot;function ZCReportBoot(B){ZCBoot.call(this,B);var A=this;this.isAppMode=false;this.module=Modules.REPORT;this.loadComponent=function(){var C=function(){jsLoaded=true;var E={};E.model=A.config.compMeta;if(A.config.isPrviewAction){E.type=ReportType.PREVIEW_REPORT}window.REPORTCONTROLLER=Controller.ReportController.create(E)};if(A.config.useCompression){var D=new Requires(Modules.REPORT);require(D.get(),D.getPromise(function(){C()}))}else{C()}}}ZCReportBoot.prototype=Object.create(ZCBoot.prototype);ZCReportBoot.prototype.constructor=ZCReportBoot;function ZCPageBoot(B){ZCBoot.call(this,B);var A=this;this.isAppMode=false;this.module=Modules.PAGE;this.loadComponent=function(){if(!A.config.isPrint){loadFiles([ZCPath.appCss.pageOldCss]);loadFiles([ZCPath.staticCss.pbfonticonCss]);loadFiles([ZCPath.appCss.pageCss])}var C=function(){Controller.PageController.create({model:A.config.compMeta});if(typeof doaction==="function"){doaction()}};if(A.config.useCompression){var D=new Requires(Modules.PAGE);require(D.get(),D.getPromise(function(){C()}))}else{C()}}}ZCPageBoot.prototype=Object.create(ZCBoot.prototype);ZCPageBoot.prototype.constructor=ZCPageBoot;ZCBoot.prototype.appInit=function(C){var A=this;C=C||{};if(A.config.useCompression){require(["jquery"],B)}else{B()}if(A.isAppMode){loadFiles([ZCPath.appCss.pageOldCss]);loadFiles([ZCPath.staticCss.pbfonticonCss]);loadFiles([ZCPath.appCss.pageCss]);if(A.config.isPrviewAction){loadFiles([ZCPath.staticCss.fontpreviewCss])}}function B(){loadFiles([ZCPath.staticJs.tpLiveDepsJs,ZCPath.staticJs.tpLiveLibJs]).then(function(){var F=[ZCPath.appJs.liveLibJs];if(A.isAppMode&&C.loadBanner){F.push(ZCPath.appJs.bannerJs)}if(A.isAppMode&&!A.config.isPrviewAction){loadFile(ZCPath.appJs.livechatJs,true).then(function(){$("#zcChat").off("click").on("click",function(){ZCLiveChat.load()})});loadFile(ZCPath.appbuilderCss.livechatCss,true);if(A.config.showBetaFeatures=="true"){var E=[ZCPath.announcementJs.betafeatureJs,ZCPath.announcementCss.betafeatureCss];loadFiles(E).then(function(){new BetaFeaturePopup().init()})}}return loadFiles(F).then(function(){A.process()})});if(A.isAppMode){if(C.isMICSNotificationEnabled&&!A.config.isPrviewAction){loadFiles([ZCPath.staticCss.micsNotificationCss]);loadFiles([ZCPath.staticJs.micsNotificationJs])}if(C.isMarketingCampaign){var D={lastBotActivity:bootConfig.managerConfig.lastBotActivity,campaignContext:bootConfig.managerConfig.campaignContext,zccpn:bootConfig.managerConfig.csrfToken};if(bootConfig.managerConfig.installAppUniqueName!=undefined&&bootConfig.managerConfig.installAppUniqueName!="null"){D.appUniqueNameForChatCampaign=bootConfig.managerConfig.installAppUniqueName}$.ajax({url:"/userhome/"+bootConfig.managerConfig.sharedBy+"/evaluateRule",type:"POST",dataType:"json",data:D,beforeSend:function(){},success:function(F,E,G){if(F.length>0){loadFiles([ZCPath.appJs.campaignsJs]);loadFiles([ZCPath.campaignCss.assistbotCss])}bootConfig.managerConfig.response=F}})}if(A.config.isInstallAppOnboardEnabled&&!A.config.isPrviewAction){loadFiles([ZCPath.appJs.installAppOnboardJs]);loadFiles([ZCPath.appCss.installAppOnboardCss])}}}};ZCBoot.prototype.process=function(){var A=this;if(!A.config.useCompression){cssLoaded=true}var B=function(){var D=function(){A.boot();if(A.isAppMode){var E=new CustomIcon(customThemeMeta);E.setCustomThemeIcons();setTimeout(function(){hideWelcomeLoading();if(A.config.isInstallAppOnboardEnabled&&!A.config.isPrviewAction){startInstallAppOnboard(A.config.installAppUniqueName)}},500)}else{(typeof (hidePageLoading)=="function")&&hidePageLoading()}};if(A.isMobile){loadFiles([ZCPath.appCss.mobileCss]).then(function(){D()})}else{D()}};if(A.isAppMode){var C=function(){if(!cssLoaded){setTimeout(C,200)}else{B()}};C()}else{B()}};function CustomIcon(A,B){this.setCustomThemeIcons=function(){if(A&&A!=""){try{var F=JSON.parse(A);var D;var C;if(B=="2"){C=Object.keys(F[2]);D=F[2]}else{if(B=="3"){C=Object.keys(F[3]);D=F[3]}else{C=Object.keys(F[1]);D=F[1]}}$.each(C,function(G,H){var I=D[H];$("#t"+H).removeClass("fa-desktop tech-desktop fa-list-alt ui-3-playlist");$("#t"+H).addClass(I)})}catch(E){}}}};